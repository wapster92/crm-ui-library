
### Команды проекта

```bash
# Установка зависимостей
npm ci
```

```bash
# Сборка библиотеки
npm run build
```

```bash
# публикация библиотеки
npm publish
```

```bash
# Фикс ошибок eslint stylelint
npm run lint
```

```bash
# Запуск локального сервера storybook
npm run storybook
```

```bash
# Билд storybook
npm run build-storybook
```

## Инициализация Husky
После установки выполните команду `npm run prepare` для инициализации husky. Если вы работаете на UNIX-подобной системе, убедитесь, что файлы `.husky/pre-commit`, `.husky/commit-msg`, `.husky/pre-push` являются исполняемыми:

```bash
chmod +x .husky/pre-commit .husky/commit-msg .husky/pre-push
```

### Стайлгайд

1. **Отступы**: Используйте 2 пробела для отступов. Не используйте табуляцию.

2. **Кавычки**: Используйте одинарные кавычки (`'`) для строк. Исключение - строковые шаблоны, которые используют
   обратные кавычки (`).

3. **Типы**: В TypeScript, всегда указывайте типы для переменных, функций и параметров, если они не могут быть выведены
   автоматически.

4. **Именование переменных**: Используйте camelCase для именования переменных и функций. Имена функций должны начинаться
   с глагола. Используйте PascalCase для именования классов и интерфейсов. Переменные массивов должны быть во
   множественном числе.

5. **Интерфейсы**: В TypeScript, для именования интерфейсов используйте префикс `I`, например, `IUser`.

6. **Операторы сравнения**: Используйте строгое сравнение `===` и `!==` вместо нестрогого сравнения `==` и `!=`.

7. **Фигурные скобки**: Фигурные скобки (`{}`) следует размещать на новой строке при объявлении функций и объектов.

8. **Стрелочные функции**: Используйте стрелочные функции (`=>`) вместо `function` для анонимных функций, когда это
   возможно.

9. **Использование `const` и `let`**: Используйте `const` для объявления переменных, значение которых не будет
   изменяться. Используйте `let` для переменных, значение которых может изменяться.
10. **Экспорт переменных**: экспорт переменных и функций с помощью ```export defaul``` воспрещен! Только именованные экспорты
11. **Именование папок и файлов**: названия папок и файлов в kebab-case Кроме компонентов vue.

11. **Vue.js**: Следуйте рекомендациям [Vue.js 3 стайлгайда](https://v3.ru.vuejs.org/ru/style-guide/), таким как:

- использование kebab-case для именования пользовательских событий, начинающихся со слова "on"
- использование сокращенной записи для директив v-bind и v-on
- использование названий компонентов только в PascalCase
- компоненты должны использовать синтаксис `<script lang="ts" setup>`
- использование только Composition API
- использование названий классов по БЭМ (с синтаксисом block\_\_element--mod)

11. **Обработка ошибок**: Всегда обрабатывайте ошибки, используя блоки `try`/`catch`, когда работаете с операциями,
    которые могут выбрасывать исключения, такими как вызовы API или работа с файлами. Логируйте ошибки для упрощения
    отладки и предоставьте пользователям информацию об ошибке.

12. **Промисы и асинхронные функции**: Используйте `async`/`await` вместо обратных вызовов и цепочек промисов, где это
    возможно, для упрощения чтения и работы с асинхронным кодом. При вызове цепочки запросов не забывайте о
    `Promise.all([])`.

13. **Комментарии**: Добавляйте комментарии в код для объяснения сложных или неочевидных частей кода. Используйте JSDoc
    для документирования функций, классов, свойств и параметров.

14. **Модули**: Используйте модули для организации кода. Импортируйте и экспортируйте функции, классы и переменные, где
    это необходимо, для обеспечения модульности и удобства чтения кода.

15. **Разделение ответственности**: Стремитесь к разделению ответственности между компонентами и функциями. Каждый
    компонент или функция должны выполнять одну и только одну задачу.
16. **Lodash**: Используйте Lodash с умом. В некоторых случаях, встроенные функции JavaScript, такие как Array.prototype.map() или Array.prototype.filter(), могут быть более подходящими и производительными решениями. Импортируйте только те функции Lodash, которые действительно нужны для вашего проекта, чтобы сократить размер финального бандла и улучшить производительность вашего приложения.
17. **Lodash**: Импортируйте только те функции Lodash, которые действительно нужны для вашего проекта, чтобы сократить размер финального бандла и улучшить производительность вашего приложения. Обязательно добавляйте ```_``` вначале функций Lodash, так как некоторые повторяют методы JS.
```javascript
    import { cloneDeep as _cloneDeep } from 'lodash';
```
18. **Lodash**: Используйте Lodash только тогда, когда он действительно упрощает и улучшает ваш код. Обязательно проверяйте типы c использованием функций Lodash, также для глубокого клонирования объектов.

Придерживаясь этих рекомендаций, вы сможете создавать качественный, структурированный и понятный код, который будет
легко поддерживать и развивать.

(Будет расширятся)


### Инструкции по разработке библиотеки @whitelist/wl-ui-library

1. **Размещение новых компонентов**: Создавайте новые компоненты в каталоге `src/components`. Эта папка разделена на подкаталоги `atoms`, `molecules` и `organisms`. Размещайте новые компоненты в соответствующих подкаталогах в отдельных папках.

2. **Использование Composition API**: Пишите компоненты с использованием Composition API через тег `<script lang="ts" setup>`.

3. **Общие стили**: Общие переменные для стилей находятся в каталоге `src/styles`.

4. **Добавление компонента в сборку**: Чтобы иметь возможность видеть результат работы, добавьте компонент в сборку. Для этого добавьте его в файл `src/components.ts`.

Пример кода:

```javascript
import NameForm from './stories/example/name-form/NameForm.vue';
import DefaultInput from './components/atoms/DefaulInput.vue';

export { NameForm, DefaultInput };
```
После этого компонент будет доступен в проекте `sandbox`.

### Руководство по использованию типов и перечислений (enum) в библиотеке

В данной библиотеке для более удобной работы и поддержки кода используются типы и перечисления (enum). Все они экспортируются из отдельных файлов, что делает их доступными для импорта и использования в других проектах.

#### Экспорт типов

Типы экспортируются из файла `types.ts`, который находится в корне исходного кода библиотеки. В этом файле выполняется реэкспорт всех типов из отдельных компонентов.

Пример содержимого файла `types.ts`:

```ts
export * as DataTableTypes from './components/organisms/data-table/DataTable.types';
export * as SelectInputTypes from './components/atoms/inputs/select-input/SelectInput.types';
export * as MainIconTypes from './components/atoms/main-icon/MainIcon.types';
export * as MainTogglerTypes from './components/atoms/main-toggler/MainToggler.types';
export * as MainNavBarTypes from './components/atoms/main-nav-bar/MainNavBar.types';
```

#### Экспорт перечислений (enum)

Аналогично типам, перечисления (enum) экспортируются из файла `enums.ts`, который также находится в корне исходного кода библиотеки. В этом файле выполняется реэкспорт всех перечислений из отдельных компонентов.

Пример содержимого файла `enums.ts`:

```ts
export * as NameFormEnums from './stories/example/name-form/NameForm.enums.ts';
export * as MainButtonEnums from './components/atoms/main-button/MainButton.enums.ts';
export * as WidgetInnerContainerEnums from './components/organisms/widget-inner-container/WidgetInnerContainer.enums.ts';
export * as NumberInputEnums from './components/atoms/inputs/number-input/NumberInput.enums.ts';
export * as TextInputEnums from './components/atoms/inputs/text-input/TextInput.enums.ts';
export * as MainAlertEnums from './components/atoms/main-alert/MainAlert.enums.ts';
export * as MainIconEnums from './components/atoms/main-icon/MainIcon.enums.ts';
export * as MainTooltipEnums from './components/atoms/main-tooltip/MainTooltip.enums.ts';
```

#### Пример использования

Типы и перечисления могут быть импортированы напрямую из библиотеки и использоваться в компонентах Vue.

Вот пример использования `MainButtonEnums` в компоненте Vue:

```vue
<template>
  <div class="controls-default">
    <MainButton
      :width="MainButtonEnums.Width.fillAvailable"
      :type="MainButtonEnums.Types.grey"
      class="controls-default__button"
      @click="writeKeyControl(KeysControls.add)"
    >
      <template #leftIcon>
        <PlusIcon class="controls-default__button-icon" />
      </template>
      <template #default>Новый ключ</template>
    </MainButton>
  </div>
</template>

<script setup lang="ts">
import { MainButton, MainButtonEnums } from '@whitelist/wl-ui-library';
// Импорт

 других зависимостей...
</script>
```

В этом примере `MainButtonEnums` используется для задания свойств `width` и `type` компонента `MainButton`.

Организация типов и перечислений (enum) этим способом обеспечивает удобство и чистоту кода, что делает проект более поддерживаемым и удобным для коллаборативной разработки.

### Экспорт типов и перечислений (enum)

Типы и перечисления (enum) в этой библиотеке не экспортируются все без исключения. Только те типы и перечисления, которые используются в свойствах (props) компонентов и в payload (event) событий, экспортируются для использования в других проектах. Это решение обусловлено тем, чтобы уменьшить количество экспортируемых типов и перечислений и сделать использование библиотеки более простым и понятным.


### Инструкция по работе с Element Plus

1. **Импорт компонентов**: Если вам нужно использовать компонент из библиотеки Element Plus, просто импортируйте его:

```javascript
<script lang="ts" setup>
import { ElInput, ElFormItem } from 'element-plus';
```

Пример использования в шаблоне:

```html
<template>
  <ElFormItem>
    <ElInput v-model="value" />
  </ElFormItem>
</template>
```

2. **Подключение стилей**: Подключайте стили для компонентов Element Plus в файле `src/styles/packages/_element.scss`.

Пример:

```scss
@import 'element-plus/theme-chalk/src/input';
@import 'element-plus/theme-chalk/src/form';
```

Перед добавлением убедитесь, что необходимый файл стилей уже не подключен.

3. **Кастомизация стилей**: Важно отметить, что настоятельно рекомендуется изучить переменные, предоставляемые Element Plus, так как они не только упрощают кастомизацию компонентов, но и могут содержать интересные механики и возможности для работы с компонентами. Ознакомление с этими переменными позволит вам максимально эффективно использовать возможности библиотеки и создавать компоненты, которые соответствуют вашим требованиям и стандартам. Вы можете использовать эти переменные в разрабатываемом вами компоненте с помощью следующей конструкции:

```scss
<style scoped lang="scss">
:deep(.el-input) {
  --el-input-bg-color: var(--system-7);
  --el-input-border-radius: 4px;
  --el-input-height: 32px;
}
</style>
```

В данном примере `var(--system-7)` является переменной из `src/styles/base/_colors.scss`. Вы также можете использовать другие переменные для настройки внешнего вида компонента.

### Документация компонентов:

После завершения работы над компонентом, вам необходимо создать документацию для него с помощью Storybook (подробнее о Storybook вы можете узнать из [документации](https://storybook.js.org/docs/vue/get-started/whats-a-story)).

1. Создайте файл `ComponentName.stories.ts` в папке вашего компонента. Это позволит создать интерактивную документацию с примерами использования компонента. Пример кода можно найти в файле `src/stories/example/name-form/NameForm.stories.ts`.

2. Создайте файл `ComponentName.mdx` в папке вашего компонента для текстового описания документации, особенностей работы и примеров использования. Пример такого файла можно посмотреть в `src/stories/example/name-form/NameForm.mdx`.

Чтобы просмотреть и протестировать документацию, запустите Storybook с помощью команды `npm run storybook`. После выполнения команды, в вашем браузере должна открыться вкладка с документацией по вашим компонентам.


### Публикация пакета

Следуйте этим шагам для публикации новой версии пакета:

Перед публикацией обязательно нужно авторизоваться в nexus
 ```bash
  npm login --registry http://nexus.whitelist.local/repository/npm-private/ 
```
NPM по умолчанию возьмет данные из файла .npmrc по этому останется только подтвержадать путем ввода команды (тыкай клавишу Enter).  
В случае если такой фокус не прокатит, то данные для авторизации
 ```
  login: npm-deploy
  password: deploy
```

1. Обновите номер версии в `package.json`. Версия должна соответствовать стандарту [Semantic Versioning](https://semver.org/). Возможно, вам потребуется использовать `npm version [patch|minor|major]`.

    ```bash
    npm version patch
    ```

   Это автоматически обновит номер версии в `package.json`.

2. Соберите ваш пакет с помощью команды `npm run build`. Это должно создать готовую к использованию версию вашего пакета.

    ```bash
    npm run build
    ```

3. Запустите команду `npm publish` для публикации вашего пакета в Nexus.

    ```bash
    npm publish
    ```

4. Проверьте, что новая версия пакета появилась на странице пакета на вашем [Nexus](http://nexus.whitelist.local) репозитории.
    ```
    login: npm-common
    password: he6jg&zK@eJL!hkf
   ```

